# Task #12: Реализовать запись трека нескольких агентов

**Issue**: [#12](https://github.com/Trionix-LAB/planner-path-studio/issues/12)

**Spec**: R-014 (⚠️ NOTE: R-014 в spec.md описывает "Recent missions", но issue требует новое требование про многоагентную запись трека)

## Описание

Добавить в интерфейс возможность явно выбирать, трек какого агента записывать в данный момент. Пользователь должен видеть список доступных агентов/объектов и включать запись трека для одного (или нескольких) из них — запись должна быть понятной и восстановимой в рамках сеанса/миссии.

## Цели

- Дать пользователю контроль над тем, какие треки сохраняются во время записи (чтобы исключать лишние/шумные данные).
- Обеспечить простую и понятную UX для включения/отключения записи трека для конкретного агента.
- Сохранить выбор в рамках сессии/миссии, чтобы запись могла быть продолжена/восстановлена.

## Пользовательский сценарий

1. В интерфейсе записи/на панели треков появляется контрол «Запись трека» или отдельный переключатель рядом с каждым агентом в списке активных объектов.
2. Пользователь открывает список агентов и включает запись для одного или нескольких агентов (в зависимости от выбранной политики — single/multi). В простом варианте достаточно возможности выбрать один агент для записи.
3. Пока запись включена для агента, его трек сохраняется в текущую сессию; UI показывает индикатор записи рядом с именем агента и на карте (иконка/красный маркер).
4. Пользователь может в любой момент остановить запись для агента; файл/запись трека сохраняется как часть миссии (или предлагается экспортировать).
5. При перезапуске приложения или открытии миссии сохранённые данные о включённой записи (в рамках сессии) восстанавливаются, если это применимо.

## Критерии приёмки

- [ ] Для каждого активного агента в списке доступен переключатель записи (или есть явный выбор агента для записи).
- [ ] При включении записи для агента UI показывает индикатор записи и карта визуально отмечает, что трек пишется.
- [ ] Остановить запись можно явно; сохранённый трек виден в структуре миссии или предлагается к экспорту.
- [ ] При перезапуске/переоткрытии миссии информация о записанных треках сохраняется и отображается в UI.

## Задачи реализации

- Показать список доступных агентов в UI записи/панели треков.
- Добавить переключатель записи рядом с каждым агентом (или раскрывающийся выбор для кнопки «Запись»).
- Визуализировать состояние записи (иконка/цвет/подпись) на панели и на карте.
- Обеспечить явную кнопку остановки/паузы записи для выбранных агентов.
- Сохранение: запоминать, какие агенты записывались в рамках сессии (и при необходимости сохранять метаданные трека в миссии).
- Accessibility: обеспечить keyboard навигацию и понятные состояния для вспомогательных технологий.

## Статус

**Статус**: in-progress  
**Исполнитель**: slonikmak  
**Дата создания**: 2026-02-12
