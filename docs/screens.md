РЎРїРµРєР° СЌРєСЂР°РЅРѕРІ (MVP)

Р”РѕРєСѓРјРµРЅС‚ РѕРїРёСЃС‹РІР°РµС‚ РѕСЃРЅРѕРІРЅС‹Рµ СЌРєСЂР°РЅС‹ Рё Р±Р°Р·РѕРІСѓСЋ РЅР°РІРёРіР°С†РёСЋ MVP РјРѕРґСѓР»СЏ РєР°СЂС‚.

## 0. РћР±С‰РёРµ РїСЂРёРЅС†РёРїС‹ UI (MVP)

- РџР»Р°С‚С„РѕСЂРјР°: desktop (РјС‹С€СЊ + РєР»Р°РІРёР°С‚СѓСЂР°). РўР°С‡-Р¶РµСЃС‚С‹ РјРѕР¶РЅРѕ РїРѕРґРґРµСЂР¶Р°С‚СЊ С‡Р°СЃС‚РёС‡РЅРѕ, РЅРѕ РЅРµ СЏРІР»СЏСЋС‚СЃСЏ РѕР±СЏР·Р°С‚РµР»СЊРЅС‹РјРё.
- РћСЃРЅРѕРІРЅРѕРµ СЂР°Р±РѕС‡РµРµ РїСЂРѕСЃС‚СЂР°РЅСЃС‚РІРѕ = РєР°СЂС‚Р° + РјРёРЅРёРјСѓРј РїРѕСЃС‚РѕСЏРЅРЅРѕ РІРёРґРёРјС‹С… СЌР»РµРјРµРЅС‚РѕРІ (HUD, СЃС‚Р°С‚СѓСЃ-Р±Р°СЂ, РїР°РЅРµР»СЊ РёРЅСЃС‚СЂСѓРјРµРЅС‚РѕРІ).
- Р’СЃРµ "С‚СЏР¶РµР»С‹Рµ" РґРµР№СЃС‚РІРёСЏ (СЃРѕР·РґР°РЅРёРµ РјРёСЃСЃРёРё, РѕС‚РєСЂС‹С‚РёРµ, СЌРєСЃРїРѕСЂС‚, РЅР°СЃС‚СЂРѕР№РєРё) РґРѕСЃС‚СѓРїРЅС‹ РёР· РІРµСЂС…РЅРµРіРѕ РјРµРЅСЋ/РєРЅРѕРїРєРё "РњРёСЃСЃРёСЏ".
- РћР±СЂР°С‚РЅР°СЏ СЃРІСЏР·СЊ: РїСЂРё РїРѕС‚РµСЂРµ СЃРІСЏР·Рё/РїР°СѓР·С‹ Р·Р°РїРёСЃРё/РѕС€РёР±РєР°С… С„Р°Р№Р»РѕРІ РѕС‚РѕР±СЂР°Р¶Р°РµС‚СЃСЏ СЏРІРЅР°СЏ, РЅРѕ РЅРµ РјРµС€Р°СЋС‰Р°СЏ СЂР°Р±РѕС‚Рµ РёРЅРґРёРєР°С†РёСЏ.

## 1. Р­РєСЂР°РЅ: РџСЂРµРєРѕРЅС„РёРіСѓСЂР°С†РёСЏ (СЃС‚Р°СЂС‚РѕРІРѕРµ РјРµРЅСЋ)

РќР°Р·РЅР°С‡РµРЅРёРµ: РІС‹Р±СЂР°С‚СЊ СЂРµР¶РёРј СЃС‚Р°СЂС‚Р° - РѕС‚РєСЂС‹С‚СЊ РјРёСЃСЃРёСЋ, СЃРѕР·РґР°С‚СЊ РЅРѕРІСѓСЋ, РїСЂРѕРґРѕР»Р¶РёС‚СЊ РІ С‡РµСЂРЅРѕРІРёРєРµ, РІРѕСЃСЃС‚Р°РЅРѕРІРёС‚СЊ С‡РµСЂРЅРѕРІРёРє.

РЎРѕСЃС‚Р°РІ:

- Р—Р°РіРѕР»РѕРІРѕРє: "РљР°СЂС‚С‹".
- РћСЃРЅРѕРІРЅС‹Рµ РґРµР№СЃС‚РІРёСЏ:
  - "РќРѕРІР°СЏ РјРёСЃСЃРёСЏ"
  - "РћС‚РєСЂС‹С‚СЊ РјРёСЃСЃРёСЋ"
  - "Р§РµСЂРЅРѕРІРёРє"
  - (РµСЃР»Рё РµСЃС‚СЊ Р°РІС‚РѕСЃРѕС…СЂР°РЅРµРЅРЅС‹Р№ С‡РµСЂРЅРѕРІРёРє) "Р’РѕСЃСЃС‚Р°РЅРѕРІРёС‚СЊ С‡РµСЂРЅРѕРІРёРє"
  - "РћР±РѕСЂСѓРґРѕРІР°РЅРёРµ"
- (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ) Р±Р»РѕРє "РќРµРґР°РІРЅРёРµ РјРёСЃСЃРёРё" (СЃРїРёСЃРѕРє РїСѓС‚РµР№) СЃ Р±С‹СЃС‚СЂС‹Рј РѕС‚РєСЂС‹С‚РёРµРј.

РџРµСЂРµС…РѕРґС‹:

- "РќРѕРІР°СЏ РјРёСЃСЃРёСЏ" -> Р­РєСЂР°РЅ 3 (РЎРѕР·РґР°РЅРёРµ РјРёСЃСЃРёРё).
- "РћС‚РєСЂС‹С‚СЊ РјРёСЃСЃРёСЋ" -> Р­РєСЂР°РЅ 4 (РћС‚РєСЂС‹С‚РёРµ РјРёСЃСЃРёРё).
- "Р§РµСЂРЅРѕРІРёРє" -> Р­РєСЂР°РЅ 2 (Р Р°Р±РѕС‡РёР№ СЌРєСЂР°РЅ РєР°СЂС‚С‹) РІ СЂРµР¶РёРјРµ РЅРѕРІРѕРіРѕ РїСѓСЃС‚РѕРіРѕ С‡РµСЂРЅРѕРІРёРєР°.
  - РџСЂРµРґС‹РґСѓС‰РёР№ Р°РІС‚РѕСЃРѕС…СЂР°РЅРµРЅРЅС‹Р№ `draft/current` СЃС‡РёС‚Р°РµС‚СЃСЏ СЃР±СЂРѕС€РµРЅРЅС‹Рј.
- "Р’РѕСЃСЃС‚Р°РЅРѕРІРёС‚СЊ С‡РµСЂРЅРѕРІРёРє" -> Р­РєСЂР°РЅ 2 (Р Р°Р±РѕС‡РёР№ СЌРєСЂР°РЅ РєР°СЂС‚С‹) + РІРѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРЅРѕРµ СЃРѕСЃС‚РѕСЏРЅРёРµ UI/РѕР±СЉРµРєС‚РѕРІ РёР· `draft/current`.
- "РћР±РѕСЂСѓРґРѕРІР°РЅРёРµ" -> Р­РєСЂР°РЅ 9 (Р­РєСЂР°РЅ РІС‹Р±РѕСЂР° РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ)

РЎРѕСЃС‚РѕСЏРЅРёСЏ:

- Р•СЃР»Рё РІРѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёРµ С‡РµСЂРЅРѕРІРёРєР° РЅРµРґРѕСЃС‚СѓРїРЅРѕ (РїРѕРІСЂРµР¶РґРµРЅРѕ) - РїРѕРєР°Р·Р°С‚СЊ СЃРѕРѕР±С‰РµРЅРёРµ Рё РїСЂРµРґР»РѕР¶РёС‚СЊ РЅР°С‡Р°С‚СЊ РЅРѕРІС‹Р№ С‡РµСЂРЅРѕРІРёРє.

## 2. Р­РєСЂР°РЅ: Р Р°Р±РѕС‡РёР№ СЌРєСЂР°РЅ РєР°СЂС‚С‹ (РѕСЃРЅРѕРІРЅРѕР№)

РќР°Р·РЅР°С‡РµРЅРёРµ: СЂРµР°Р»СЊРЅРѕРµ РІСЂРµРјСЏ (РІРѕРґРѕР»Р°Р·/Р±Р°Р·Р°), С‚СЂРµРє, РїР»Р°РЅРёСЂРѕРІР°РЅРёРµ (РјР°СЂС€СЂСѓС‚С‹/Р·РѕРЅС‹/РіР°Р»СЃС‹/РјР°СЂРєРµСЂС‹), СѓРїСЂР°РІР»РµРЅРёРµ СЃР»РѕСЏРјРё, РјРёСЃСЃРёСЏ/СЌРєСЃРїРѕСЂС‚/РЅР°СЃС‚СЂРѕР№РєРё.

Р›РµР№Р°СѓС‚ (СЂРµРєРѕРјРµРЅРґСѓРµРјС‹Р№):

- Р¦РµРЅС‚СЂ: РєР°СЂС‚Р° (OSM).
- Р’РµСЂС…РЅСЏСЏ РїР°РЅРµР»СЊ (toolbar):
  - Р‘Р»РѕРє "РњРёСЃСЃРёСЏ": РёРјСЏ РјРёСЃСЃРёРё (РёР»Рё "Р§РµСЂРЅРѕРІРёРє"), РёРЅРґРёРєР°С‚РѕСЂ Р°РІС‚РѕСЃРѕС…СЂР°РЅРµРЅРёСЏ, РєРЅРѕРїРєРё "РћС‚РєСЂС‹С‚СЊ/РЎРѕС…СЂР°РЅРёС‚СЊ РєР°Рє.../Р­РєСЃРїРѕСЂС‚".
  - Р’ РјРµРЅСЋ "РњРёСЃСЃРёСЏ" РѕР±СЏР·Р°С‚РµР»СЊРЅРѕ РµСЃС‚СЊ РїСѓРЅРєС‚ "РќР° СЃС‚Р°СЂС‚" РґР»СЏ РІРѕР·РІСЂР°С‚Р° РЅР° СЃС‚Р°СЂС‚РѕРІС‹Р№ СЌРєСЂР°РЅ (Р­РєСЂР°РЅ 1).
  - Р‘Р»РѕРє "РРЅСЃС‚СЂСѓРјРµРЅС‚С‹": "РњР°СЂС€СЂСѓС‚", "Р—РѕРЅР° (РіР°Р»СЃС‹)", "РњР°СЂРєРµСЂ", "Р’С‹Р±РѕСЂ/Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ".
  - Р‘Р»РѕРє "РўСЂРµРє": "РџР°СѓР·Р°", "Р’РѕР·РѕР±РЅРѕРІРёС‚СЊ", "Р—Р°РІРµСЂС€РёС‚СЊ С‚СЂРµРє".
  - Р‘Р»РѕРє "РќР°СЃС‚СЂРѕР№РєРё" (РёРєРѕРЅРєР° С€РµСЃС‚РµСЂРЅРё).
- РџСЂР°РІР°СЏ РїР°РЅРµР»СЊ (dock):
  - HUD (РєРѕРѕСЂРґРёРЅР°С‚С‹, СЃРєРѕСЂРѕСЃС‚СЊ, РєСѓСЂСЃ, РіР»СѓР±РёРЅР°) вЂ” РѕС‚РѕР±СЂР°Р¶Р°РµС‚ РґР°РЅРЅС‹Рµ РІС‹Р±СЂР°РЅРЅРѕРіРѕ Р°РіРµРЅС‚Р° (РїСЂРё РІС‹Р±РѕСЂРµ Р°РіРµРЅС‚Р° РІ Р»РµРІРѕР№ РїР°РЅРµР»Рё HUD РїРµСЂРµРєР»СЋС‡Р°РµС‚СЃСЏ РЅР° РµРіРѕ С‚РµР»РµРјРµС‚СЂРёСЋ).
  - РЎС‚Р°С‚СѓСЃС‹: СЃРІСЏР·СЊ (РћРљ/С‚Р°Р№РјР°СѓС‚), Р·Р°РїРёСЃСЊ С‚СЂРµРєР° (РёРґРµС‚/РїР°СѓР·Р° вЂ” РґР»СЏ РІС‹Р±СЂР°РЅРЅРѕРіРѕ Р°РіРµРЅС‚Р°), Р°РєС‚РёРІРЅС‹Р№ С‚СЂРµРє (id/РЅРѕРјРµСЂ).
  - РўСЂРµРєРё Р°РіРµРЅС‚Р°: РїСЂРё РІС‹Р±СЂР°РЅРЅРѕРј Р°РіРµРЅС‚Рµ РїРѕРєР°Р·С‹РІР°РµС‚СЃСЏ СЃРїРёСЃРѕРє РµРіРѕ С‚СЂРµРєРѕРІ (Р°РЅР°Р»РѕРіРёС‡РЅРѕ РїСЂРµР¶РЅРµРјСѓ В«РўСЂРµРєРё РјРёСЃСЃРёРёВ», РЅРѕ РѕС‚С„РёР»СЊС‚СЂРѕРІР°РЅРЅС‹Р№ РїРѕ `agent_id`). Р”Р»СЏ РєР°Р¶РґРѕРіРѕ С‚СЂРµРєР° вЂ” РІСЂРµРјСЏ РЅР°С‡Р°Р»Р°/РѕРєРѕРЅС‡Р°РЅРёСЏ, РёРЅРґРёРєР°С‚РѕСЂ Р°РєС‚РёРІРЅРѕСЃС‚Рё, РєРЅРѕРїРєР° СѓРґР°Р»РµРЅРёСЏ.
  - (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ) В«РћР±СЉРµРєС‚С‹В» (РєСЂР°С‚РєРёР№ СЃРїРёСЃРѕРє: РјР°СЂС€СЂСѓС‚С‹/Р·РѕРЅС‹/РјР°СЂРєРµСЂС‹; Р±С‹СЃС‚СЂС‹Р№ РІС‹Р±РѕСЂ).
  - РЎРІРѕР№СЃС‚РІР° РѕР±СЉРµРєС‚Р°.
- Р›РµРІР°СЏ РїР°РЅРµР»СЊ (dock):
  - РњРµРЅРµРґР¶РµСЂ СЃР»РѕРµРІ (track/routes/markers/grid/scale_bar; СЃР»РѕР№ РІРѕРґРѕР»Р°Р·Р° РЅРµ РѕС‚РєР»СЋС‡Р°РµРјС‹Р№).
  - РџР°РЅРµР»СЊ В«РђРіРµРЅС‚С‹В»: СЃРїРёСЃРѕРє Р°РіРµРЅС‚РѕРІ РјРёСЃСЃРёРё. Р”Р»СЏ РєР°Р¶РґРѕРіРѕ Р°РіРµРЅС‚Р° РѕС‚РѕР±СЂР°Р¶Р°РµС‚СЃСЏ:
    - С†РІРµС‚РЅРѕР№ РёРЅРґРёРєР°С‚РѕСЂ (marker_color Р°РіРµРЅС‚Р°)
    - РЅР°Р·РІР°РЅРёРµ (title)
    - РёРЅРґРёРєР°С‚РѕСЂ СЃРѕСЃС‚РѕСЏРЅРёСЏ Р·Р°РїРёСЃРё С‚СЂРµРєР° (РїСѓР»СЊСЃРёСЂСѓСЋС‰РёР№ РїСЂРё Р·Р°РїРёСЃРё / РїР°СѓР·Р° / РѕСЃС‚Р°РЅРѕРІР»РµРЅР°)
    - РєРЅРѕРїРєР° В«PinВ» (Р·Р°РєСЂРµРїР»СЏРµС‚ СЃР»РµР¶РµРЅРёРµ Р·Р° Р°РіРµРЅС‚РѕРј; Р°РєС‚РёРІРµРЅ С‚РѕР»СЊРєРѕ РѕРґРёРЅ Р°РіРµРЅС‚)
    - РєРЅРѕРїРєР° В«РџРµСЂРµРјРµСЃС‚РёС‚СЊСЃСЏ РєВ» (С†РµРЅС‚СЂРёСЂСѓРµС‚ РєР°СЂС‚Сѓ РЅР° Р°РіРµРЅС‚Рµ)
    - РєРЅРѕРїРєР° В«Р—Р°РїРёСЃСЊ/РџР°СѓР·Р°В» (toggle РІРєР»СЋС‡РµРЅРёСЏ/РѕСЃС‚Р°РЅРѕРІРєРё Р·Р°РїРёСЃРё С‚СЂРµРєР° РґР»СЏ СЌС‚РѕРіРѕ Р°РіРµРЅС‚Р°)
    - РїСЂРё РєР»РёРєРµ РЅР° Р°РіРµРЅС‚Р° РѕРЅ СЃС‚Р°РЅРѕРІРёС‚СЃСЏ В«РІС‹Р±СЂР°РЅРЅС‹РјВ»: HUD РІ РїСЂР°РІРѕР№ РїР°РЅРµР»Рё РїРµСЂРµРєР»СЋС‡Р°РµС‚СЃСЏ РЅР° РµРіРѕ РґР°РЅРЅС‹Рµ, РІ РїСЂР°РІРѕР№ РїР°РЅРµР»Рё РїРѕСЏРІР»СЏРµС‚СЃСЏ СЃРїРёСЃРѕРє С‚СЂРµРєРѕРІ СЌС‚РѕРіРѕ Р°РіРµРЅС‚Р°
  - (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ) В«РћР±СЉРµРєС‚С‹В» (РєСЂР°С‚РєРёР№ СЃРїРёСЃРѕРє: РјР°СЂС€СЂСѓС‚С‹/Р·РѕРЅС‹/РјР°СЂРєРµСЂС‹; Р±С‹СЃС‚СЂС‹Р№ РІС‹Р±РѕСЂ).
- РќРёР·: СЃС‚СЂРѕРєР° СЃРѕСЃС‚РѕСЏРЅРёСЏ
  - РљРѕРѕСЂРґРёРЅР°С‚С‹ РїРѕРґ РєСѓСЂСЃРѕСЂРѕРј.
  - РњР°СЃС€С‚Р°Р± (РµСЃР»Рё РїРѕРєР°Р·С‹РІР°РµС‚СЃСЏ Р»РёРЅРµР№РєР° - РјРѕР¶РЅРѕ РґСѓР±Р»РёСЂРѕРІР°С‚СЊ РІ СЃС‚Р°С‚СѓСЃ-Р±Р°СЂРµ).

РћСЃРЅРѕРІРЅС‹Рµ СЃС†РµРЅР°СЂРёРё:

1) Р РµР°Р»СЊРЅРѕРµ РІСЂРµРјСЏ:
   - РјРµС‚РєР° РІРѕРґРѕР»Р°Р·Р° (РёРєРѕРЅРєР°) Рё РјРµС‚РєР° Р±Р°Р·РѕРІРѕР№ СЃС‚Р°РЅС†РёРё.
  - С‚СЂРµРє СЂРёСЃСѓРµС‚СЃСЏ СЃРѕРіР»Р°СЃРЅРѕ Р·Р°РїРёСЃРё Рё СЃРµРіРјРµРЅС‚Р°С†РёРё (СЃРј. [spec/spec.md](../spec/spec.md)).
   - РїСЂРё С‚Р°Р№РјР°СѓС‚Рµ СЃРІСЏР·Рё: РІРёР·СѓР°Р»СЊРЅР°СЏ РёРЅРґРёРєР°С†РёСЏ (РЅР°РїСЂРёРјРµСЂ, Р·РЅР°С‡РѕРє/С†РІРµС‚ + С‚РµРєСЃС‚ "РќРµС‚ РґР°РЅРЅС‹С… N СЃРµРє").

2) Р РµР¶РёРј СЃР»РµР¶РµРЅРёСЏ:
   - РєРЅРѕРїРєР° В«PinВ» РІ СЃРїРёСЃРєРµ Р°РіРµРЅС‚РѕРІ (Р»РµРІР°СЏ РїР°РЅРµР»СЊ) РІРєР»СЋС‡Р°РµС‚ СЃР»РµР¶РµРЅРёРµ Р·Р° РІС‹Р±СЂР°РЅРЅС‹Рј Р°РіРµРЅС‚РѕРј.
   - pin СЂР°Р±РѕС‚Р°РµС‚ С‚РѕР»СЊРєРѕ РґР»СЏ РѕРґРЅРѕРіРѕ Р°РіРµРЅС‚Р°: РІРєР»СЋС‡РµРЅРёРµ РЅР° РґСЂСѓРіРѕРј Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРё СЃРЅРёРјР°РµС‚ РїСЂРµРґС‹РґСѓС‰РёР№.
   - РїРѕР»СЊР·РѕРІР°С‚РµР»СЊСЃРєРёР№ pan/drag РѕС‚РєР»СЋС‡Р°РµС‚ СЃР»РµР¶РµРЅРёРµ (pin СЃР±СЂР°СЃС‹РІР°РµС‚СЃСЏ).

3) РРЅСЃС‚СЂСѓРјРµРЅС‚С‹ РїР»Р°РЅРёСЂРѕРІР°РЅРёСЏ:
   - "РњР°СЂС€СЂСѓС‚": РєР»РёРєРё РґРѕР±Р°РІР»СЏСЋС‚ РІРµСЂС€РёРЅС‹; РґРІРѕР№РЅРѕР№ РєР»РёРє РёР»Рё РєРЅРѕРїРєР° "Р—Р°РІРµСЂС€РёС‚СЊ" Р·Р°РІРµСЂС€Р°РµС‚.
   - "Р—РѕРЅР° (РіР°Р»СЃС‹)": СЂРёСЃСѓРµС‚СЃСЏ Polygon Р·РѕРЅС‹; РїРѕСЃР»Рµ Р·Р°РІРµСЂС€РµРЅРёСЏ - РїР°РЅРµР»СЊ РїР°СЂР°РјРµС‚СЂРѕРІ (СѓРіРѕР» 0/90, С€РёСЂРёРЅР°) Рё РіРµРЅРµСЂР°С†РёСЏ РіР°Р»СЃРѕРІ.
   - "РњР°СЂРєРµСЂ": РєР»РёРє СЃС‚Р°РІРёС‚ С‚РѕС‡РєСѓ Рё РѕС‚РєСЂС‹РІР°РµС‚ СЃРІРѕР№СЃС‚РІР° (РёРјСЏ/РѕРїРёСЃР°РЅРёРµ).
   - "Р’С‹Р±РѕСЂ/Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ": РІС‹Р±РѕСЂ, РїРµСЂРµРјРµС‰РµРЅРёРµ, СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ РІРµСЂС€РёРЅ, СѓРґР°Р»РµРЅРёРµ.

4) РЎРІРѕР№СЃС‚РІР° РѕР±СЉРµРєС‚Р°:
   - РїРѕ double-click РЅР° РѕР±СЉРµРєС‚ РёР»Рё С‡РµСЂРµР· РєРѕРЅС‚РµРєСЃС‚РЅРѕРµ РјРµРЅСЋ "РЎРІРѕР№СЃС‚РІР°" РѕС‚РєСЂС‹РІР°РµС‚СЃСЏ РїР°РЅРµР»СЊ/РґРёР°Р»РѕРі (Р­РєСЂР°РЅ 7).

5) Р’РѕР·РІСЂР°С‚ РЅР° СЃС‚Р°СЂС‚:
   - РўРѕС‡РєР° РІС…РѕРґР°: РїСѓРЅРєС‚ "РќР° СЃС‚Р°СЂС‚" РІ РјРµРЅСЋ "РњРёСЃСЃРёСЏ" (СЂРµС€РµРЅРёРµ РїРѕ СЂР°Р·РјРµС‰РµРЅРёСЋ РґР»СЏ MVP).
   - РџРµСЂРµРґ РїРµСЂРµС…РѕРґРѕРј РІС‹РїРѕР»РЅСЏРµС‚СЃСЏ best-effort СЃРѕС…СЂР°РЅРµРЅРёРµ С‚РµРєСѓС‰РµРіРѕ СЃРѕСЃС‚РѕСЏРЅРёСЏ РјРёСЃСЃРёРё/С‡РµСЂРЅРѕРІРёРєР°.
   - Р”Р»СЏ РѕС‚РєСЂС‹С‚РѕР№ РјРёСЃСЃРёРё (РЅРµ draft) РѕСЃРІРѕР±РѕР¶РґР°РµС‚СЃСЏ `mission.lock`.
   - РџРµСЂРµС…РѕРґ РІС‹РїРѕР»РЅСЏРµС‚СЃСЏ РЅР° Р­РєСЂР°РЅ 1 (`/`), РїРѕСЃР»Рµ С‡РµРіРѕ РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ РјРѕР¶РµС‚ РІС‹Р±СЂР°С‚СЊ "Р§РµСЂРЅРѕРІРёРє", "Р’РѕСЃСЃС‚Р°РЅРѕРІРёС‚СЊ" РёР»Рё РѕС‚РєСЂС‹С‚СЊ РјРёСЃСЃРёСЋ.
   - Р•СЃР»Рё СЃРѕСЃС‚РѕСЏРЅРёРµ Р°РІС‚РѕСЃРѕС…СЂР°РЅРµРЅРёСЏ `error`, РїРµСЂРµРґ РІС‹С…РѕРґРѕРј РїРѕРєР°Р·С‹РІР°РµС‚СЃСЏ РїРѕРґС‚РІРµСЂР¶РґРµРЅРёРµ (СЂРёСЃРє РїРѕС‚РµСЂРё РїРѕСЃР»РµРґРЅРёС… РёР·РјРµРЅРµРЅРёР№).

РљР»Р°РІРёС€Рё (РјРёРЅРёРјСѓРј):

- `Esc`: РѕС‚РјРµРЅР° С‚РµРєСѓС‰РµРіРѕ РґРµР№СЃС‚РІРёСЏ/РІС‹С…РѕРґ РёР· СЂРµР¶РёРјР° СЂРёСЃРѕРІР°РЅРёСЏ.
- `Delete`: СѓРґР°Р»РёС‚СЊ РІС‹РґРµР»РµРЅРЅС‹Р№ РѕР±СЉРµРєС‚.
- `Ctrl+Z` / `Ctrl+Y` (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ РґР»СЏ MVP): undo/redo.

## 3. Р­РєСЂР°РЅ: РЎРѕР·РґР°РЅРёРµ РјРёСЃСЃРёРё

РќР°Р·РЅР°С‡РµРЅРёРµ: СЃРѕР·РґР°С‚СЊ РЅРѕРІСѓСЋ РјРёСЃСЃРёСЋ, РІС‹Р±СЂР°С‚СЊ РїР°РїРєСѓ С…СЂР°РЅРµРЅРёСЏ, Р·Р°РґР°С‚СЊ РёРјСЏ.

РЎРѕСЃС‚Р°РІ:

- РџРѕР»Рµ "РРјСЏ РјРёСЃСЃРёРё" (РѕР±СЏР·Р°С‚РµР»СЊРЅРѕРµ).
- Р’С‹Р±РѕСЂ РїР°РїРєРё С…СЂР°РЅРµРЅРёСЏ:
  - "Р’С‹Р±СЂР°С‚СЊ РїР°РїРєСѓ..." (РґРёР°Р»РѕРі).
  - (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ) С‡РµРєР±РѕРєСЃ "РЎРѕР·РґР°С‚СЊ РїРѕРґРїР°РїРєСѓ СЃ РёРјРµРЅРµРј РјРёСЃСЃРёРё" (РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ РІРєР»СЋС‡РµРЅ).
- РљРЅРѕРїРєРё: "РЎРѕР·РґР°С‚СЊ", "РћС‚РјРµРЅР°".

Р’Р°Р»РёРґР°С†РёСЏ:

- РёРјСЏ РЅРµ РїСѓСЃС‚РѕРµ
- РїР°РїРєР° РґРѕСЃС‚СѓРїРЅР° РґР»СЏ Р·Р°РїРёСЃРё
- РµСЃР»Рё РїР°РїРєР° СѓР¶Рµ СЃРѕРґРµСЂР¶РёС‚ `mission.json`:
  - РїСЂРµРґСѓРїСЂРµР¶РґРµРЅРёРµ Рё РѕС‚РєР°Р·, Р»РёР±Рѕ "РћС‚РєСЂС‹С‚СЊ СЃСѓС‰РµСЃС‚РІСѓСЋС‰СѓСЋ" (РІС‹Р±РѕСЂ РїРѕРІРµРґРµРЅРёСЏ РЅР° СѓСЃРјРѕС‚СЂРµРЅРёРµ)

Р РµР·СѓР»СЊС‚Р°С‚:

- СЃРѕР·РґР°РµС‚СЃСЏ СЃС‚СЂСѓРєС‚СѓСЂР° РјРёСЃСЃРёРё, `mission.json`
- РїРµСЂРµС…РѕРґ РЅР° Р­РєСЂР°РЅ 2 РІ СЂРµР¶РёРјРµ РјРёСЃСЃРёРё (РЅРµ С‡РµСЂРЅРѕРІРёРє)

## 4. Р­РєСЂР°РЅ: РћС‚РєСЂС‹С‚РёРµ РјРёСЃСЃРёРё

РќР°Р·РЅР°С‡РµРЅРёРµ: РІС‹Р±СЂР°С‚СЊ Рё РѕС‚РєСЂС‹С‚СЊ СЃСѓС‰РµСЃС‚РІСѓСЋС‰СѓСЋ РјРёСЃСЃРёСЋ.

РЎРѕСЃС‚Р°РІ:

- Р’С‹Р±РѕСЂ РїР°РїРєРё РјРёСЃСЃРёРё (РґРёР°Р»РѕРі).
- (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ) СЃРїРёСЃРѕРє "РќРµРґР°РІРЅРёРµ" + Р±С‹СЃС‚СЂС‹Р№ РїРѕРёСЃРє РїРѕ РёРјРµРЅРё/РїСѓС‚Рё.
- РРЅРґРёРєР°С†РёСЏ СЃС‚Р°С‚СѓСЃР°:
  - РѕР±РЅР°СЂСѓР¶РµРЅ `mission.lock` -> РїСЂРµРґСѓРїСЂРµР¶РґРµРЅРёРµ Рё РѕС‚РєР°Р· РѕС‚ РѕС‚РєСЂС‹С‚РёСЏ РІ СЂРµР¶РёРјРµ Р·Р°РїРёСЃРё (РёР»Рё РїСЂРµРґР»РѕР¶РµРЅРёРµ read-only, РµСЃР»Рё РЅСѓР¶РЅРѕ)
  - РІРµСЂСЃРёСЏ `schema_version` РІС‹С€Рµ РїРѕРґРґРµСЂР¶РёРІР°РµРјРѕР№ -> СЃРѕРѕР±С‰РµРЅРёРµ "С‚СЂРµР±СѓРµС‚СЃСЏ РѕР±РЅРѕРІР»РµРЅРёРµ"

Р РµР·СѓР»СЊС‚Р°С‚:

- Р·Р°РіСЂСѓР·РєР° РѕР±СЉРµРєС‚РѕРІ/С‚СЂРµРєРѕРІ
- РїРµСЂРµС…РѕРґ РЅР° Р­РєСЂР°РЅ 2

## 5. Р­РєСЂР°РЅ: Р­РєСЃРїРѕСЂС‚

РќР°Р·РЅР°С‡РµРЅРёРµ: СЌРєСЃРїРѕСЂС‚РёСЂРѕРІР°С‚СЊ С‚СЂРµРєРё, РјР°СЂС€СЂСѓС‚С‹, С‚РѕС‡РєРё РІ С„РѕСЂРјР°С‚С‹ РґР»СЏ РІРЅРµС€РЅРёС… СЃРёСЃС‚РµРј.

РЎРѕСЃС‚Р°РІ:

- Р§С‚Рѕ СЌРєСЃРїРѕСЂС‚РёСЂРѕРІР°С‚СЊ:
  - РўСЂРµРєРё (РІС‹Р±РѕСЂ: Р°РєС‚РёРІРЅС‹Р№ С‚СЂРµРє / РІС‹Р±СЂР°РЅРЅС‹Рµ / РІСЃРµ)
  - РњР°СЂС€СЂСѓС‚С‹ Рё РіР°Р»СЃС‹ (РІС‹Р±РѕСЂ: РІС‹Р±СЂР°РЅРЅС‹Рµ / РІСЃРµ)
  - РўРѕС‡РєРё-РјР°СЂРєРµСЂС‹ (РІС‹Р±РѕСЂ: РІС‹Р±СЂР°РЅРЅС‹Рµ / РІСЃРµ)
- Р¤РѕСЂРјР°С‚:
  - РўСЂРµРєРё: GPX / KML
  - РњР°СЂС€СЂСѓС‚С‹: GPX / KML
  - РўРѕС‡РєРё: CSV / GPX
- РџСѓС‚СЊ СЃРѕС…СЂР°РЅРµРЅРёСЏ (РїР°РїРєР° + РёРјСЏ С„Р°Р№Р»Р° РёР»Рё Р°РІС‚Рѕ-РёРјСЏ).
- РљРЅРѕРїРєРё: "Р­РєСЃРїРѕСЂС‚", "РћС‚РјРµРЅР°".

РџСЂР°РІРёР»Р°:

- Р Р°Р·СЂС‹РІС‹ РїРѕ `segment_id` СЃРѕС…СЂР°РЅСЏСЋС‚СЃСЏ РєР°Рє СЃРµРіРјРµРЅС‚С‹/СЂР°Р·РґРµР»СЊРЅС‹Рµ Р»РёРЅРёРё (СЃРј. [spec/spec.md](../spec/spec.md)).

## 6. Р­РєСЂР°РЅ: РќР°СЃС‚СЂРѕР№РєРё

РќР°Р·РЅР°С‡РµРЅРёРµ: РЅР°СЃС‚СЂРѕРёС‚СЊ РѕС‚РѕР±СЂР°Р¶РµРЅРёРµ РёР·РјРµСЂРµРЅРёР№ (СЃРµС‚РєР°/Р»РёРЅРµР№РєР°), С„РѕСЂРјР°С‚ РєРѕРѕСЂРґРёРЅР°С‚, СЃС‚РёР»Рё РѕР±СЉРµРєС‚РѕРІ, РґРµС„РѕР»С‚С‹.

РЎРѕСЃС‚Р°РІ (РјРёРЅРёРјСѓРј):

- Р‘Р»РѕРє "РР·РјРµСЂРµРЅРёСЏ":
  - С‡РµРєР±РѕРєСЃ "Р›РёРЅРµР№РєР° РјР°СЃС€С‚Р°Р±Р°"
  - С‡РµРєР±РѕРєСЃ "РЎРµС‚РєР° (РјРµС‚СЂС‹)"
  - СЂРµР¶РёРј С€Р°РіР° СЃРµС‚РєРё: auto / manual + СЃРїРёСЃРѕРє С€Р°РіРѕРІ (РµСЃР»Рё manual)
  - "Р”Р»РёРЅС‹ РѕС‚СЂРµР·РєРѕРІ": off / on-select / always
<!-- - Р‘Р»РѕРє "РџРѕРґРєР»СЋС‡РµРЅРёРµ (РЈРљР‘)":
  - Р’С‹Р±РѕСЂ РїСЂРѕС„РёР»СЏ: "РЎС‚Р°СЂС‹Р№" / "РќРѕРІС‹Р№"
  - РџРѕР»СЏ (РІ Р·Р°РІРёСЃРёРјРѕСЃС‚Рё РѕС‚ РїСЂРѕС„РёР»СЏ): COM-РїРѕСЂС‚, IP, РїРѕСЂС‚С‹ РІРІРѕРґР°/РІС‹РІРѕРґР°, СЃРєРѕСЂРѕСЃС‚СЊ Р“РќРЎРЎ, РєРѕРѕСЂРґРёРЅР°С‚С‹ Р±Р°Р·С‹. -->
- Р‘Р»РѕРє "РљРѕРѕСЂРґРёРЅР°С‚С‹":
  - С‚РѕС‡РЅРѕСЃС‚СЊ РІС‹РІРѕРґР° (РєРѕР»-РІРѕ Р·РЅР°РєРѕРІ РїРѕСЃР»Рµ Р·Р°РїСЏС‚РѕР№; default 6)
- Р‘Р»РѕРє "РЎС‚РёР»Рё РѕР±СЉРµРєС‚РѕРІ":
  - С‚СЂРµРє: С†РІРµС‚, С‚РѕР»С‰РёРЅР°
  - РјР°СЂС€СЂСѓС‚: С†РІРµС‚, С‚РѕР»С‰РёРЅР°
  - Р·РѕРЅР°: С†РІРµС‚ РѕР±РІРѕРґРєРё, Р·Р°Р»РёРІРєР°/РїСЂРѕР·СЂР°С‡РЅРѕСЃС‚СЊ
  - РіР°Р»СЃС‹: С†РІРµС‚, С‚РѕР»С‰РёРЅР°
  - РјР°СЂРєРµСЂС‹: РёРєРѕРЅРєР° (РїСЂРµСЃРµС‚С‹), СЂРµР¶РёРј РїРѕРґРїРёСЃРё (hover/always)
  - РґР»СЏ РєР°Р¶РґРѕРіРѕ Р°РіРµРЅС‚Р° РґРѕР»Р¶РЅР° Р±С‹С‚СЊ РІРѕР·РјРѕР¶РЅРѕСЃС‚СЊ РЅР°Р·РЅР°С‡РёС‚СЊ РёСЃС‚РѕС‡РЅРёРє РіРµРѕРіСЂР°С„РёС‡РµСЃРєРёС… РґР°РЅРЅС‹С… РЅР° РѕСЃРЅРѕРІРµ РІС‹Р±СЂР°РЅРЅРѕРіРѕ СЂР°РЅРµРµ РїРѕР»СЊР·РѕРІР°С‚РµР»РµРј РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ РІ С‚РµРєСѓС‰РµРј РїСЂРѕС„РёР»Рµ
  - РґР»СЏ Р±Р°Р·РѕРІРѕР№ СЃС‚Р°РЅС†РёРё С‚Р°РєР¶Рµ РґРѕР»Р¶РµРЅ РЅР°Р·РЅР°С‡Р°С‚СЊСЃСЏ РёСЃС‚РѕС‡РЅРёРє РіРµРѕРіСЂР°С„РёС‡РµСЃРєРёС… РґР°РЅРЅС‹С… С‡РµСЂРµР· С‚РѕС‚ Р¶Рµ РјРµС…Р°РЅРёР·Рј, С‡С‚Рѕ Рё РґР»СЏ Р°РіРµРЅС‚РѕРІ
- Р‘Р»РѕРє "РџРѕ СѓРјРѕР»С‡Р°РЅРёСЋ":
  - РїРµСЂРµРєР»СЋС‡Р°С‚РµР»СЊ С‚РµРјС‹ РёРЅС‚РµСЂС„РµР№СЃР° (`РўС‘РјРЅР°СЏ` / `РЎРІРµС‚Р»Р°СЏ`)
    - СЂР°СЃРїРѕР»РѕР¶РµРЅРёРµ: `РљР°СЂС‚Р° -> РќР°СЃС‚СЂРѕР№РєРё (РёРєРѕРЅРєР° С€РµСЃС‚РµСЂРЅРё) -> РІРєР»Р°РґРєР° "РџРѕ СѓРјРѕР»С‡Р°РЅРёСЋ"`, РІРµСЂС…РЅСЏСЏ С‡Р°СЃС‚СЊ РІРєР»Р°РґРєРё
  - follow_diver (default)
  - РІРёРґРёРјРѕСЃС‚СЊ СЃР»РѕРµРІ (track/routes/markers/grid/scale_bar)
- Р‘Р»РѕРє "РђРіРµРЅС‚С‹":
  - РЅР°Р·РЅР°С‡РµРЅРёРµ РёСЃС‚РѕС‡РЅРёРєРѕРІ РЅР°РІРёРіР°С†РёРё РґР»СЏ Р±Р°Р·РѕРІРѕР№ СЃС‚Р°РЅС†РёРё Рё РјР°СЏРєРѕРІ
  - РЅР°СЃС‚СЂРѕР№РєРё РѕС‚РѕР±СЂР°Р¶РµРЅРёСЏ РјР°СЏРєРѕРІ (ID, С†РІРµС‚Р°, СЂР°Р·РјРµСЂ РјР°СЂРєРµСЂР°)
- Р‘Р»РѕРє "РћР±РѕСЂСѓРґРѕРІР°РЅРёРµ" (РѕС‚РґРµР»СЊРЅР°СЏ РІРєР»Р°РґРєР°):
  - СЃРїРёСЃРѕРє РёРЅСЃС‚Р°РЅСЃРѕРІ РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ Р°РєС‚РёРІРЅРѕРіРѕ РїСЂРѕС„РёР»СЏ СЃ С‚РµРєСѓС‰РёРј СЃС‚Р°С‚СѓСЃРѕРј
  - РЅРµР·Р°РІРёСЃРёРјРѕРµ РІРєР»СЋС‡РµРЅРёРµ/РІС‹РєР»СЋС‡РµРЅРёРµ РєР°Р¶РґРѕРіРѕ РёРЅСЃС‚Р°РЅСЃР° СѓСЃС‚СЂРѕР№СЃС‚РІР°
  - РєРЅРѕРїРєР° РїРµСЂРµС…РѕРґР° РЅР° Р­РєСЂР°РЅ 9 ("РћС‚РєСЂС‹С‚СЊ РѕРєРЅРѕ РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ")
- РљРЅРѕРїРєРё: "РџСЂРёРјРµРЅРёС‚СЊ", "РЎР±СЂРѕСЃРёС‚СЊ РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ", "Р—Р°РєСЂС‹С‚СЊ"

РџРµСЂРµС…РѕРґС‹:

- РР· РІРєР»Р°РґРєРё "РћР±РѕСЂСѓРґРѕРІР°РЅРёРµ" РїРѕ РєРЅРѕРїРєРµ "РћС‚РєСЂС‹С‚СЊ РѕРєРЅРѕ РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ" -> Р­РєСЂР°РЅ 9.
- Р’РѕР·РІСЂР°С‚ СЃ Р­РєСЂР°РЅa 9 РІС‹РїРѕР»РЅСЏРµС‚СЃСЏ РѕР±СЂР°С‚РЅРѕ РІ СЂР°Р±РѕС‡РёР№ СЌРєСЂР°РЅ РєР°СЂС‚С‹ СЃ РІРѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёРµРј РєРѕРЅС‚РµРєСЃС‚Р° (draft/РѕС‚РєСЂС‹С‚Р°СЏ РјРёСЃСЃРёСЏ).

РџСЂР°РІРёР»Р° С…СЂР°РЅРµРЅРёСЏ:

- Р“Р»РѕР±Р°Р»СЊРЅС‹Рµ РґРµС„РѕР»С‚С‹: РЅР°СЃС‚СЂРѕР№РєРё РїСЂРёР»РѕР¶РµРЅРёСЏ.
- РџРµСЂРµРѕРїСЂРµРґРµР»РµРЅРёСЏ РґР»СЏ РјРёСЃСЃРёРё: РІ `mission.json` (СЃРј. [spec/spec.md](../spec/spec.md), `docs/mission-format.md`).

## 7. Р­РєСЂР°РЅ: РЎРІРѕР№СЃС‚РІР° РѕР±СЉРµРєС‚Р° (РїР°РЅРµР»СЊ/РґРёР°Р»РѕРі)

РќР°Р·РЅР°С‡РµРЅРёРµ: СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ Р°С‚СЂРёР±СѓС‚РѕРІ Рё РїР°СЂР°РјРµС‚СЂРѕРІ РіРµРЅРµСЂР°С†РёРё.

Р’Р°СЂРёР°РЅС‚С‹:

1) РњР°СЂС€СЂСѓС‚ (`route`):
   - РёРјСЏ
   - Р·Р°РјРµС‚РєР°
   - (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ) СЃС‚РёР»СЊ (С†РІРµС‚/С‚РѕР»С‰РёРЅР°) - РµСЃР»Рё РїРѕРґРґРµСЂР¶РёРІР°РµС‚СЃСЏ per-object
   - РґР»РёРЅР° (read-only)
   - (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ) СЃРїРёСЃРѕРє СЃРµРіРјРµРЅС‚РѕРІ СЃ РґР»РёРЅРѕР№ (read-only)

2) Р—РѕРЅР° (`survey_area`):
   - РёРјСЏ
   - Р·Р°РјРµС‚РєР°
   - lane_angle_deg (0/90)
   - lane_width_m
   - (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ) РєРЅРѕРїРєР° "РџРµСЂРµРіРµРЅРµСЂРёСЂРѕРІР°С‚СЊ РіР°Р»СЃС‹"

3) РњР°СЂРєРµСЂ (`marker`):
   - РёРјСЏ
   - РѕРїРёСЃР°РЅРёРµ (РјРЅРѕРіРѕСЃС‚СЂРѕС‡РЅРѕ)

Р”РµР№СЃС‚РІРёСЏ:

- "РЎРѕС…СЂР°РЅРёС‚СЊ" / "РћС‚РјРµРЅР°" (РµСЃР»Рё РґРёР°Р»РѕРі) РёР»Рё auto-save (РµСЃР»Рё РїР°РЅРµР»СЊ, СЃРѕРіР»Р°СЃРѕРІР°С‚СЊ СЃ РѕР±С‰РёРј Р°РІС‚РѕСЃРѕС…СЂР°РЅРµРЅРёРµРј РјРёСЃСЃРёРё).

## 8. Р¤Р»РѕСѓ СѓРїСЂР°РІР»РµРЅРёСЏ РѕР±СЉРµРєС‚Р°РјРё РЅР° РєР°СЂС‚Рµ (MVP)

Р¦РµР»СЊ: С‡С‚РѕР±С‹ РѕРїРµСЂР°С‚РѕСЂ РјРѕРі Р±С‹СЃС‚СЂРѕ СЃРѕР·РґР°РІР°С‚СЊ/СЂРµРґР°РєС‚РёСЂРѕРІР°С‚СЊ РѕР±СЉРµРєС‚С‹ Р±РµР· "РїРѕС‚РµСЂРё" РІ СЂРµР¶РёРјР°С… Рё Р±РµР· СЃР»СѓС‡Р°Р№РЅС‹С… Р»РѕРјР°РЅРёР№ РіР°Р»СЃРѕРІ.

### 8.1 РћР±С‰РёРµ РїСЂРёРЅС†РёРїС‹ СЂРµР¶РёРјРѕРІ

- Р’ РєР°Р¶РґС‹Р№ РјРѕРјРµРЅС‚ РІСЂРµРјРµРЅРё Р°РєС‚РёРІРµРЅ РѕРґРёРЅ РёРЅСЃС‚СЂСѓРјРµРЅС‚ (СЂРµР¶РёРј): `Р’С‹Р±РѕСЂ/Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ`, `РњР°СЂС€СЂСѓС‚`, `Р—РѕРЅР° (РіР°Р»СЃС‹)`, `РњР°СЂРєРµСЂ`.
- РђРєС‚РёРІРЅС‹Р№ РёРЅСЃС‚СЂСѓРјРµРЅС‚ РІСЃРµРіРґР° РІРёРґРёРј РІ toolbar (РїРѕРґСЃРІРµС‚РєР°) Рё РІ СЃС‚Р°С‚СѓСЃ-Р±Р°СЂРµ (С‚РµРєСЃС‚).
- `Esc`:
  - РѕС‚РјРµРЅСЏРµС‚ С‚РµРєСѓС‰РµРµ "СЂРёСЃРѕРІР°РЅРёРµ" (РЅРµР·Р°РІРµСЂС€РµРЅРЅСѓСЋ РіРµРѕРјРµС‚СЂРёСЋ)
  - РІРѕР·РІСЂР°С‰Р°РµС‚ РІ `Р’С‹Р±РѕСЂ/Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ` (РµСЃР»Рё СЌС‚Рѕ РґРѕРїСѓСЃС‚РёРјРѕ РїРѕ UX)
- РљР»РёРє РїРѕ РїСѓСЃС‚РѕР№ РєР°СЂС‚Рµ РІ СЂРµР¶РёРјРµ `Р’С‹Р±РѕСЂ/Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ` СЃРЅРёРјР°РµС‚ РІС‹РґРµР»РµРЅРёРµ.
- `Delete` СѓРґР°Р»СЏРµС‚ РІС‹РґРµР»РµРЅРЅС‹Р№ РѕР±СЉРµРєС‚ (СЃ РїРѕРґС‚РІРµСЂР¶РґРµРЅРёРµРј С‚РѕР»СЊРєРѕ РґР»СЏ "РѕРїР°СЃРЅС‹С…" РѕРїРµСЂР°С†РёР№, СЃРј. РЅРёР¶Рµ).

### 8.2 Р’С‹Р±РѕСЂ Рё РєРѕРЅС‚РµРєСЃС‚РЅС‹Рµ РґРµР№СЃС‚РІРёСЏ (РєРѕРЅС‚РµРєСЃС‚РЅРѕРµ РјРµРЅСЋ)

РџСЂР°РІР°СЏ РєРЅРѕРїРєР° РїРѕ РѕР±СЉРµРєС‚Сѓ РѕС‚РєСЂС‹РІР°РµС‚ РјРµРЅСЋ (РјРёРЅРёРјСѓРј):

- `РЎРІРѕР№СЃС‚РІР°...`
- `РџРµСЂРµРёРјРµРЅРѕРІР°С‚СЊ`
- `РЈРґР°Р»РёС‚СЊ`

Р”Р»СЏ Р·РѕРЅС‹ РѕР±СЃР»РµРґРѕРІР°РЅРёСЏ (`survey_area`) РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅРѕ:

- `РџР°СЂР°РјРµС‚СЂС‹ РіР°Р»СЃРѕРІ...` (РјРѕР¶РЅРѕ РІРµСЃС‚Рё РІ С‚Рµ Р¶Рµ "РЎРІРѕР№СЃС‚РІР°")
- `РџРµСЂРµРіРµРЅРµСЂРёСЂРѕРІР°С‚СЊ РіР°Р»СЃС‹`

### 8.3 РњР°СЂС€СЂСѓС‚ (LineString)

РЎРѕР·РґР°РЅРёРµ:

1) РџРѕР»СЊР·РѕРІР°С‚РµР»СЊ РІС‹Р±РёСЂР°РµС‚ РёРЅСЃС‚СЂСѓРјРµРЅС‚ `РњР°СЂС€СЂСѓС‚`.
2) РљР»РёРєРё РїРѕ РєР°СЂС‚Рµ РґРѕР±Р°РІР»СЏСЋС‚ РІРµСЂС€РёРЅС‹.
3) Р—Р°РІРµСЂС€РµРЅРёРµ: РґРІРѕР№РЅРѕР№ РєР»РёРє РїРѕ РїРѕСЃР»РµРґРЅРµР№ С‚РѕС‡РєРµ РёР»Рё РєРЅРѕРїРєР° `Р—Р°РІРµСЂС€РёС‚СЊ` РІ toolbar.
4) РџРѕСЃР»Рµ Р·Р°РІРµСЂС€РµРЅРёСЏ РјР°СЂС€СЂСѓС‚ РїРѕР»СѓС‡Р°РµС‚ РёРјСЏ РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ (РЅР°РїСЂРёРјРµСЂ `РњР°СЂС€СЂСѓС‚ 1`) Рё СЃС‚Р°РЅРѕРІРёС‚СЃСЏ РІС‹РґРµР»РµРЅРЅС‹Рј.
5) Р•СЃР»Рё СЂРµР¶РёРј "Р”Р»РёРЅС‹ РѕС‚СЂРµР·РєРѕРІ" = `on-select`, РїРѕРєР°Р·С‹РІР°СЋС‚СЃСЏ РїРѕРґРїРёСЃРё РґР»РёРЅС‹ РєР°Р¶РґРѕРіРѕ СЃРµРіРјРµРЅС‚Р° Рё РѕР±С‰Р°СЏ РґР»РёРЅР° РјР°СЂС€СЂСѓС‚Р°.

Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ (РІ `Р’С‹Р±РѕСЂ/Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ`):

- РџРµСЂРµС‚Р°СЃРєРёРІР°РЅРёРµ РІРµСЂС€РёРЅ.
- Р”РѕР±Р°РІР»РµРЅРёРµ РІРµСЂС€РёРЅС‹ РєР»РёРєРѕРј РїРѕ СЃРµРіРјРµРЅС‚Сѓ (РїРѕСЏРІР»СЏРµС‚СЃСЏ РЅРѕРІР°СЏ РІРµСЂС€РёРЅР°).
- РЈРґР°Р»РµРЅРёРµ РІРµСЂС€РёРЅС‹ (РєРѕРЅС‚РµРєСЃС‚РЅРѕРµ РјРµРЅСЋ РЅР° РІРµСЂС€РёРЅРµ РёР»Рё `Delete` РїСЂРё РІС‹РґРµР»РµРЅРЅРѕР№ РІРµСЂС€РёРЅРµ).

Р•СЃР»Рё РІРєР»СЋС‡РµРЅРѕ РѕС‚РѕР±СЂР°Р¶РµРЅРёРµ РґР»РёРЅ РѕС‚СЂРµР·РєРѕРІ:

- РґР»РёРЅС‹ СЃРµРіРјРµРЅС‚РѕРІ РїРµСЂРµСЃС‡РёС‚С‹РІР°СЋС‚СЃСЏ Рё РѕР±РЅРѕРІР»СЏСЋС‚СЃСЏ РїРѕСЃР»Рµ Р·Р°РІРµСЂС€РµРЅРёСЏ РїРµСЂРµРјРµС‰РµРЅРёСЏ (mouse up) РёР»Рё СЃ РґРµР±Р°СѓРЅСЃРѕРј (РЅР°РїСЂРёРјРµСЂ, 200-300 РјСЃ)

### 8.4 РњР°СЂРєРµСЂС‹ (Point)

РЎРѕР·РґР°РЅРёРµ:

1) РРЅСЃС‚СЂСѓРјРµРЅС‚ `РњР°СЂРєРµСЂ`.
2) РљР»РёРє РїРѕ РєР°СЂС‚Рµ СЃРѕР·РґР°РµС‚ С‚РѕС‡РєСѓ.
3) РЎСЂР°Р·Сѓ РѕС‚РєСЂС‹РІР°РµС‚СЃСЏ "РЎРІРѕР№СЃС‚РІР°" РјР°СЂРєРµСЂР° (РјРёРЅРёРјСѓРј: РёРјСЏ + РѕРїРёСЃР°РЅРёРµ).

Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ:

- РџРµСЂРµС‚Р°СЃРєРёРІР°РЅРёРµ С‚РѕС‡РєРё.
- РР·РјРµРЅРµРЅРёРµ РёРјРµРЅРё/РѕРїРёСЃР°РЅРёСЏ РІ "РЎРІРѕР№СЃС‚РІР°С…".

### 8.5 Р—РѕРЅР° РѕР±СЃР»РµРґРѕРІР°РЅРёСЏ + РіР°Р»СЃС‹ (РѕСЃРЅРѕРІРЅРѕР№ С„Р»РѕСѓ)

#### 8.5.1 Р§С‚Рѕ С‚Р°РєРѕРµ "Р·РѕРЅР°" Рё С‡С‚Рѕ С‚Р°РєРѕРµ "РіР°Р»СЃС‹" РІ UI

- Р—РѕРЅР° РѕР±СЃР»РµРґРѕРІР°РЅРёСЏ = РїРѕР»РёРіРѕРЅ `survey_area` (master-РѕР±СЉРµРєС‚).
- Р“Р°Р»СЃС‹ = РЅР°Р±РѕСЂ РѕР±СЉРµРєС‚РѕРІ `lane` (РґРѕС‡РµСЂРЅРёРµ РѕР±СЉРµРєС‚С‹), РІСЃРµРіРґР° РїСЂРёРІСЏР·Р°РЅС‹ Рє Р·РѕРЅРµ С‡РµСЂРµР· `parent_area_id`.
- Р’ UI РіР°Р»СЃС‹ РЅРµ СЃС‡РёС‚Р°СЋС‚СЃСЏ "СЃР°РјРѕСЃС‚РѕСЏС‚РµР»СЊРЅС‹РјРё": РѕРЅРё РїСЂРѕРёР·РІРѕРґРЅС‹Рµ Рё РїРµСЂРµСЃРѕР·РґР°СЋС‚СЃСЏ РёР· Р·РѕРЅС‹ + РїР°СЂР°РјРµС‚СЂРѕРІ.

РЎР»РµРґСЃС‚РІРёРµ:

- Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ РіРµРѕРјРµС‚СЂРёРё Р·РѕРЅС‹ РІСЃРµРіРґР° РїРѕС‚РµРЅС†РёР°Р»СЊРЅРѕ РјРµРЅСЏРµС‚ РіР°Р»СЃС‹.
- Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ РіРµРѕРјРµС‚СЂРёРё РѕС‚РґРµР»СЊРЅС‹С… РіР°Р»СЃРѕРІ РІ MVP Р·Р°РїСЂРµС‰РµРЅРѕ (read-only РіРµРѕРјРµС‚СЂРёСЏ).

#### 8.5.2 РЎРѕР·РґР°РЅРёРµ Р·РѕРЅС‹ Рё РїРµСЂРІРёС‡РЅР°СЏ РіРµРЅРµСЂР°С†РёСЏ РіР°Р»СЃРѕРІ

1) РџРѕР»СЊР·РѕРІР°С‚РµР»СЊ РІС‹Р±РёСЂР°РµС‚ РёРЅСЃС‚СЂСѓРјРµРЅС‚ `Р—РѕРЅР° (РіР°Р»СЃС‹)`.
2) РљР»РёРєРё РїРѕ РєР°СЂС‚Рµ РґРѕР±Р°РІР»СЏСЋС‚ РІРµСЂС€РёРЅС‹ РїРѕР»РёРіРѕРЅР°.
3) Р—Р°РІРµСЂС€РµРЅРёРµ: РґРІРѕР№РЅРѕР№ РєР»РёРє/РєРЅРѕРїРєР° `Р—Р°РІРµСЂС€РёС‚СЊ`.
4) РЎСЂР°Р·Сѓ РїРѕСЃР»Рµ Р·Р°РІРµСЂС€РµРЅРёСЏ РїРѕРєР°Р·С‹РІР°РµРј РїР°РЅРµР»СЊ "РџР°СЂР°РјРµС‚СЂС‹ РіР°Р»СЃРѕРІ":
   - `lane_angle_deg`: 0 / 90
   - `lane_width_m`: С‡РёСЃР»Рѕ (Рј)
   - РєРЅРѕРїРєР° `РЎРіРµРЅРµСЂРёСЂРѕРІР°С‚СЊ` (РёР»Рё Р°РІС‚Рѕ-РіРµРЅРµСЂР°С†РёСЏ РїСЂРё РїРµСЂРІРѕРј РѕС‚РєСЂС‹С‚РёРё РїР°РЅРµР»Рё)
5) РџРѕСЃР»Рµ РіРµРЅРµСЂР°С†РёРё:
   - Р·РѕРЅР° Рё РіР°Р»СЃС‹ РѕС‚РѕР±СЂР°Р¶Р°СЋС‚СЃСЏ РЅР° РєР°СЂС‚Рµ
   - Р·РѕРЅР° РІС‹РґРµР»РµРЅР°, РіР°Р»СЃС‹ РїРѕРґСЃРІРµС‡РµРЅС‹ РєР°Рє "РґРѕС‡РµСЂРЅРёРµ"
   - РІ РјРµРЅРµРґР¶РµСЂРµ СЃР»РѕРµРІ РіР°Р»СЃС‹ Р¶РёРІСѓС‚ РІ СЃР»РѕРµ `routes` (РєР°Рє С‡Р°СЃС‚СЊ "РјР°СЂС€СЂСѓС‚С‹/РіР°Р»СЃС‹")

#### 8.5.3 Р’С‹Р±РѕСЂ Р·РѕРЅС‹ Рё РІС‹Р±РѕСЂ РіР°Р»СЃР°

РџСЂР°РІРёР»Рѕ РєР»РёРєР° (СЂРµРєРѕРјРµРЅРґСѓРµРјРѕРµ РґР»СЏ MVP):

- РљР»РёРє РїРѕ РѕР±Р»Р°СЃС‚Рё (РїРѕ Р·Р°Р»РёРІРєРµ/РѕР±РІРѕРґРєРµ) РІС‹Р±РёСЂР°РµС‚ `survey_area`.
- РљР»РёРє РїРѕ Р»РёРЅРёРё РіР°Р»СЃР° РІС‹Р±РёСЂР°РµС‚ РЅРµ РіР°Р»СЃ, Р° РµРіРѕ СЂРѕРґРёС‚РµР»СЏ `survey_area` (Рё РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅРѕ РїРѕРґСЃРІРµС‡РёРІР°РµС‚ РІС‹Р±СЂР°РЅРЅС‹Р№ РіР°Р»СЃ).

РџРѕСЏСЃРЅРµРЅРёРµ: СЌС‚Рѕ СЃРЅРёР¶Р°РµС‚ СЂРёСЃРє "СЃР»СѓС‡Р°Р№РЅРѕ СѓРґР°Р»РёС‚СЊ/РёР·РјРµРЅРёС‚СЊ" РѕРґРёРЅ РіР°Р»СЃ Рё СѓРїСЂРѕС‰Р°РµС‚ СЂР°Р±РѕС‚Сѓ (РІ MVP РіР°Р»СЃС‹ РЅРµ СЂРµРґР°РєС‚РёСЂСѓСЋС‚СЃСЏ РїРѕ РѕРґРЅРѕРјСѓ).

#### 8.5.4 РР·РјРµРЅРµРЅРёРµ РїР°СЂР°РјРµС‚СЂРѕРІ РіР°Р»СЃРѕРІ (0/90, С€РёСЂРёРЅР°)

Р¤Р»РѕСѓ:

1) Р—РѕРЅР° РІС‹Р±СЂР°РЅР°.
2) РџРѕР»СЊР·РѕРІР°С‚РµР»СЊ РѕС‚РєСЂС‹РІР°РµС‚ "РЎРІРѕР№СЃС‚РІР°" Р·РѕРЅС‹.
3) РњРµРЅСЏРµС‚ `lane_angle_deg` РёР»Рё `lane_width_m`.
4) РџРµСЂРµРіРµРЅРµСЂР°С†РёСЏ РіР°Р»СЃРѕРІ:
   - РІР°СЂРёР°РЅС‚ A (РїСЂРѕСЃС‚РѕР№): СЃСЂР°Р·Сѓ РїРѕСЃР»Рµ РёР·РјРµРЅРµРЅРёСЏ (live preview) + debounce.
   - РІР°СЂРёР°РЅС‚ B (Р±РµР·РѕРїР°СЃРЅС‹Р№): РїРѕРєР°Р·С‹РІР°РµРј `РџРµСЂРµРіРµРЅРµСЂРёСЂРѕРІР°С‚СЊ` Рё РїСЂРёРјРµРЅСЏРµРј С‚РѕР»СЊРєРѕ РїРѕ РєРЅРѕРїРєРµ.

Р”Р»СЏ MVP СЂРµРєРѕРјРµРЅРґСѓРµС‚СЃСЏ РІР°СЂРёР°РЅС‚ B, С‡С‚РѕР±С‹ РЅРµ Р±С‹Р»Рѕ РЅРµРѕР¶РёРґР°РЅРЅС‹С… "СЃРєР°С‡РєРѕРІ" РїСЂРё РІРІРѕРґРµ С‡РёСЃР»Р°.

#### 8.5.5 Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ РіРµРѕРјРµС‚СЂРёРё Р·РѕРЅС‹ (РїРµСЂРµС‚Р°СЃРєРёРІР°РЅРёРµ РІРµСЂС€РёРЅ)

Р¤Р»РѕСѓ (СЂРµРєРѕРјРµРЅРґСѓРµРјС‹Р№ РґР»СЏ MVP):

1) Р’ `Р’С‹Р±РѕСЂ/Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ` РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ РІС‹Р±РёСЂР°РµС‚ Р·РѕРЅСѓ.
2) РќР° РІРµСЂС€РёРЅР°С… РїРѕРєР°Р·С‹РІР°СЋС‚СЃСЏ С…СЌРЅРґР»С‹ (РєР°Рє Сѓ РјР°СЂС€СЂСѓС‚Р°).
3) РџСЂРё РїРµСЂРµРјРµС‰РµРЅРёРё РІРµСЂС€РёРЅС‹ Р·РѕРЅР° РјРµРЅСЏРµС‚СЃСЏ.
4) Р“Р°Р»СЃС‹ РїРѕРјРµС‡Р°СЋС‚СЃСЏ РєР°Рє "РЅРµР°РєС‚СѓР°Р»СЊРЅС‹Рµ" (РІРёР·СѓР°Р»СЊРЅРѕ: Р±РѕР»РµРµ Р±Р»РµРґРЅС‹Рµ/С€С‚СЂРёС…РѕРІРєР°/Р·РЅР°С‡РѕРє).
5) РџРѕ Р·Р°РІРµСЂС€РµРЅРёРё drag (mouse up) РїРѕРєР°Р·С‹РІР°РµРј РЅРµРёРЅРІР°Р·РёРІРЅСѓСЋ РїРѕРґСЃРєР°Р·РєСѓ:
   - `Р“Р°Р»СЃС‹ РЅРµР°РєС‚СѓР°Р»СЊРЅС‹. [РџРµСЂРµРіРµРЅРµСЂРёСЂРѕРІР°С‚СЊ] [РћС‚Р»РѕР¶РёС‚СЊ]`
6) РќР°Р¶Р°С‚РёРµ `РџРµСЂРµРіРµРЅРµСЂРёСЂРѕРІР°С‚СЊ`:
   - СѓРґР°Р»СЏРµС‚ СЃС‚Р°СЂС‹Рµ `lane` РґР»СЏ `parent_area_id`
   - СЃРѕР·РґР°РµС‚ РЅРѕРІС‹Р№ РЅР°Р±РѕСЂ `lane` СЃ С‚РµРј Р¶Рµ `parent_area_id`

Р­С‚Рѕ РґР°РµС‚ РѕРїРµСЂР°С‚РѕСЂСѓ РєРѕРЅС‚СЂРѕР»СЊ Рё СѓРјРµРЅСЊС€Р°РµС‚ СЃР»СѓС‡Р°Р№РЅС‹Рµ РїРµСЂРµСЃС‡РµС‚С‹.

#### 8.5.6 РЈРґР°Р»РµРЅРёРµ Р·РѕРЅС‹

РЈРґР°Р»РµРЅРёРµ Р·РѕРЅС‹ (`survey_area`) РІСЃРµРіРґР° РєР°СЃРєР°РґРЅРѕ СѓРґР°Р»СЏРµС‚ РІСЃРµ РµРµ РіР°Р»СЃС‹ (`lane`).

Р’ UX:

- РџСЂРё `Delete` РїРѕ Р·РѕРЅРµ РїРѕРєР°Р·С‹РІР°РµРј РїРѕРґС‚РІРµСЂР¶РґРµРЅРёРµ:
  - "РЈРґР°Р»РёС‚СЊ Р·РѕРЅСѓ Рё N РіР°Р»СЃРѕРІ? [РЈРґР°Р»РёС‚СЊ] [РћС‚РјРµРЅР°]"

РЈРґР°Р»РµРЅРёРµ РѕС‚РґРµР»СЊРЅРѕРіРѕ РіР°Р»СЃР° РІ MVP:

- Р·Р°РїСЂРµС‰РµРЅРѕ (С‚Р°Рє РєР°Рє РіР°Р»СЃС‹ РїСЂРѕРёР·РІРѕРґРЅС‹Рµ). Р’ РєРѕРЅС‚РµРєСЃС‚РЅРѕРј РјРµРЅСЋ РїРѕ РіР°Р»СЃСѓ `РЈРґР°Р»РёС‚СЊ` РѕС‚СЃСѓС‚СЃС‚РІСѓРµС‚.

#### 8.5.7 Р§С‚Рѕ РґРµР»Р°С‚СЊ, РµСЃР»Рё РЅСѓР¶РЅРѕ "РґС‹СЂРєР°/РёСЃРєР»СЋС‡РµРЅРёРµ" РІ Р·РѕРЅРµ

Р”Р»СЏ MVP "РґС‹СЂРєРё" (Polygon СЃ holes) РЅРµ РїРѕРґРґРµСЂР¶РёРІР°РµРј.

Р РµРєРѕРјРµРЅРґСѓРµРјС‹Р№ РѕР±С…РѕРґРЅРѕР№ СЃС†РµРЅР°СЂРёР№:

- СЂРёСЃРѕРІР°С‚СЊ РґРІРµ Р·РѕРЅС‹ Рё РіРµРЅРµСЂРёСЂРѕРІР°С‚СЊ РіР°Р»СЃС‹ РѕС‚РґРµР»СЊРЅРѕ
- РёР»Рё СЂРёСЃРѕРІР°С‚СЊ Р±РѕР»РµРµ С‚РѕС‡РЅС‹Р№ РєРѕРЅС‚СѓСЂ Р·РѕРЅС‹ Р±РµР· РІРЅСѓС‚СЂРµРЅРЅРёС… РёСЃРєР»СЋС‡РµРЅРёР№

### 8.6 РџРѕСЂСЏРґРѕРє РіР°Р»СЃРѕРІ Рё РѕС‚РѕР±СЂР°Р¶РµРЅРёРµ РЅР°РїСЂР°РІР»РµРЅРёСЏ

Р”Р»СЏ MVP (РјРёРЅРёРјСѓРј):

- РІ `lane` РµСЃС‚СЊ `lane_index` (1..N), РѕС‚РѕР±СЂР°Р¶РµРЅРёРµ РЅРѕРјРµСЂР° РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ.
- РЅР°РїСЂР°РІР»РµРЅРёРµ "Р·РјРµР№РєРѕР№" РјРѕР¶РЅРѕ РїРѕРєР°Р·С‹РІР°С‚СЊ СЃС‚СЂРµР»РєРѕР№ РЅР° РєРѕРЅС†Рµ РєР°Р¶РґРѕРіРѕ РіР°Р»СЃР° РёР»Рё С‚РѕР»СЊРєРѕ Сѓ РїРµСЂРІРѕРіРѕ/РїРѕСЃР»РµРґРЅРµРіРѕ (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ).

## 9. Р’С‹Р±РѕСЂ Рё РЅР°СЃС‚СЂРѕР№РєР° РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ

- РЎР»РµРІР° СЃРїРёСЃРѕРє РїСЂРѕС„РёР»РµР№ РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ, СЃРѕР·РґР°РЅРЅС‹С… РїРѕР»СЊР·РѕРІР°С‚РµР»РµРј. РџРѕ СѓРјРѕР»С‡Р°РЅРёСЋ РґРѕР»Р¶РЅРѕ Р±С‹С‚СЊ С‚СЂРё РїСЂРѕС„РёР»СЏ
РџСЂРѕС„РёР»СЊ Zima USBL - РІРєР»СЋС‡Р°РµС‚ РІ СЃРµР±СЏ С‚РѕР»СЊРєРѕ РѕР±РѕСЂСѓРґРѕРІР°РЅРёРµ Zima2r
РџСЂРѕС„РёР»СЊ Zima + GNSS - РІРєР»СЋС‡Р°РµС‚ РІ СЃРµР±СЏ РѕР±РѕСЂСѓРґРѕРІР°РЅРёРµ Zima2r Рё GNSS-UDP
- РЎРїСЂР°РІР° СЂР°Р·Р»РёС‡РЅС‹Рµ РЅР°СЃС‚СЂРѕР№РєРё, РєРѕС‚РѕСЂС‹Рµ РґРѕР»Р¶РЅС‹ РѕС‚РѕР±СЂР°Р¶Р°С‚СЊСЃСЏ РІ С‚РѕРј РёР»Рё РёРЅРѕРј РѕР±РѕСЂСѓРґРѕРІР°РЅРёРё (СЃРј. [devices.md](device.md))
- РќР°СЃС‚СЂРѕР№РєРё РѕС‚СЂРёСЃРѕРІС‹РІР°СЋС‚СЃСЏ РїРѕ СЃРѕРѕС‚РІРµС‚СЃС‚РІСѓСЋС‰РµР№ СЃС…РµРјРµ РѕР±РѕСЂСѓРґРѕРІР°РЅРёСЏ. (СЃРј. [devices.md](device.md))
- Р’РѕР·РјРѕР¶РЅРѕСЃС‚СЊ РґРѕР±Р°РІРёС‚СЊ/СЂРµРґР°РєС‚РёСЂРѕРІР°С‚СЊ/СѓРґР°Р»РёС‚СЊ РїСЂРѕС„РёР»СЊ Рё РЅР°Р·РЅР°С‡РёС‚СЊ/СЂРµРґР°РєС‚РёСЂРѕРІР°С‚СЊ/СѓРґР°Р»РёС‚СЊ РµРјСѓ РѕР±РѕСЂСѓРґРѕРІР°РЅРёРµ РёР· СЃРїРёСЃРєР° ([devices.md](device.md))
- Р”Р»СЏ РѕРґРЅРѕРіРѕ РїСЂРѕС„РёР»СЏ MUST РїРѕРґРґРµСЂР¶РёРІР°С‚СЊСЃСЏ РЅРµСЃРєРѕР»СЊРєРѕ РёРЅСЃС‚Р°РЅСЃРѕРІ РѕРґРЅРѕРіРѕ С‚РёРїР° СѓСЃС‚СЂРѕР№СЃС‚РІР° (РЅР°РїСЂРёРјРµСЂ, РЅРµСЃРєРѕР»СЊРєРѕ `GNSS-UDP`).
- Р’ `РќР°СЃС‚СЂРѕР№РєРё -> РђРіРµРЅС‚С‹` РёСЃС‚РѕС‡РЅРёРєРё РЅР°РІРёРіР°С†РёРё РґР»СЏ Р°РіРµРЅС‚РѕРІ Рё Р±Р°Р·РѕРІРѕР№ СЃС‚Р°РЅС†РёРё MUST РїРѕРєР°Р·С‹РІР°С‚СЊ РІСЃРµ РёРЅСЃС‚Р°РЅСЃС‹ Р°РєС‚РёРІРЅРѕРіРѕ РїСЂРѕС„РёР»СЏ.

## Addendum (T-66, 2026-02-28)

Уточнения UX-поведения для сценариев сохранения/восстановления:

- StartScreen, CreateMissionDialog и OpenMissionDialog используют единый persisted путь миссий planner.missionsDir; выбор папки в любом из экранов сразу сохраняется в settings.
- В диалоге создания миссии submit-контролы блокируются на время async подтверждения (защита от двойного сабмита).
- При поздней загрузке настроек dialogs MUST NOT перезаписывать вручную введенный путь пользователя.
- Для маршрутов /create-mission и /open-mission draft-гидрация выполняется до открытия диалога, чтобы исключить ложные ошибки Mission file not found.
- При закрытии окна/приложения используется best-effort сценарий финализации активной миссии (сохранение + освобождение lock) и prepare-close handshake в Electron с timeout fallback.
