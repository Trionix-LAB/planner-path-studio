# test(gnss): GNSS-UDP simulator (NMEA 0183) for local and CI testing

## README (short)
- Назначение: CLI-симулятор GNSS-компаса, отправляет NMEA 0183 строки по UDP в приложение.
- Быстрый запуск (пример): `npm run gnss:sim -- --to 127.0.0.1:28128 --rate 2`
- Полезно для проверки: парсинга NMEA, таймаутов связи, поведения при битых сообщениях.

## Цель
Легкий симулятор GNSS-UDP для локальной разработки и CI: генерация корректных и некорректных NMEA сообщений (`GGA`/`RMC`/`HDT`) с управляемой частотой и сценариями.

## Область и режимы
- CLI/Node скрипт (`tools/gnss-sim`) с параметрами:
  - `--to <host>:<port>`
  - `--rate <hz>`
  - `--mode stream|single|playback|broken`
- Режимы отправки:
  - корректные последовательности NMEA,
  - смешанные строки в одном UDP-пакете,
  - обрезанные/битые строки,
  - playback из сценария JSON/YAML.

## Формат сценария (пример)
```yaml
- msg: "$GPRMC,123519,A,5956.2500,N,03018.5160,E,1.2,45.0,230394,,*00"
  delay_ms: 500
- msg: "$GPGGA,123520,5956.2504,N,03018.5168,E,1,08,0.9,12.3,M,0.0,M,,*00"
  delay_ms: 500
- msg: "$HEHDT,120.0,T*00"
  delay_ms: 500
```

## Интерфейс тестирования и интеграции
- Поддержать `--to <host>:<port>` для направления датаграмм в приложение.
- Для CI: фиксированный playback-сценарий + deterministic seed для повторяемости.

## Критерии приёмки
- [ ] CLI отправляет NMEA-поток на заданный UDP порт.
- [ ] Есть режимы valid/broken/playback.
- [ ] Поддержаны примеры сценариев в `docs/` или `tools/`.
- [ ] Интеграционные тесты используют симулятор для проверки парсера.

## Связь
- Интеграция GNSS: `docs/features/gnss-udp-integration.md`
- Спецификация оборудования: `docs/devices.md`
