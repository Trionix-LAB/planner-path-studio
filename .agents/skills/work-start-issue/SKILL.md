---
name: work-start-issue
description: Брать issue в работу по процессу: перевод в `status:in-progress`, назначение исполнителя, создание/checkout ветки от issue. Используй, когда пользователь просит "начни работу по #123", "возьми задачу", "создай ветку от issue".
---

# Start Work On Issue

Источник правил: `docs/process/PROCESS.md`.

## Inputs
- Номер issue.

## Procedure
1. Убедись, что issue в `status:todo` и соответствует DoR по процессу.
2. Проверь `spec/spec.md` на наличие соответствующего требования (R-XXX):
   - если в спецификации нет подходящего пункта — создай новый `R-XXX` в `spec/spec.md` с чётким описанием (кратко: что, где, поведение, критерии приёмки) и добавь ссылку на issue;
   - если пункт есть, но не помечен `R-XXX`, пометь его нужным идентификатором и обнови текст при необходимости;
   - зафиксируй `Spec: R-XXX` в теле PR (обязательное поле для traceability).
3. Переведи issue в `status:in-progress` и назначь исполнителя по процессу.
4. Создай и checkout ветку от issue (предпочтительно через `gh issue develop ...` по процессу).
5. Перед созданием задачи в `spec/tasks/` закрой все неясности:
   - Извлеки из issue (description + ключевые комментарии) кандидаты на «непрояснённые пункты»: неоднозначные формулировки, отсутствующие критерии приёмки, варианты реализации, зависимости/интеграции, платформенные различия (web/electron), данные/форматы, ограничения производительности.
   - Если неясностей нет — переходи к шагу 6.
   - Если неясности есть — задай пользователю уточняющие вопросы по каждому пункту через интерактивный выбор (варианты решений). Требования к вопросам:
     - 1 вопрос = 1 решение, которое влияет на итоговую реализацию.
     - 2–6 взаимно исключающих вариантов ответа + опционально free-form.
     - Отметь «предпочтительный» вариант, если он очевиден из процесса/спека/существующего кода.
     - После получения ответов: зафиксируй выбранные решения как факты (без «TBD», «??», «возможно») и обнови формулировки задачи.
   - Нельзя создавать `task-<issue_number>.md`, если внутри остаются открытые вопросы или «заглушки».
6. Создай в папке `spec/tasks/` файл `task-<issue_number>.md` с задачей, полученной из issue (description и важные комментарии) и уже выбранными решениями по всем ранее неясным пунктам. Обязательно:
   - Ссылка на issue.
   - Ссылка на `Spec: R-XXX`.
   - Чёткие критерии приёмки без неоднозначностей.

## Output Contract
Верни:
- `Result`: `success` или `fail`.
- `Artifacts`: `issue_number`, `branch_name`.
- `Next`: например `spec-ensure-requirement`, `dev-implement-change`.

Дополнительно (важно для качества):
- Если на шаге 5 задавались вопросы — перечисли кратко принятые решения (по одному предложению на пункт) в итоговом сообщении, чтобы было видно, что неясности закрыты до создания `spec/tasks/task-<issue_number>.md`.

