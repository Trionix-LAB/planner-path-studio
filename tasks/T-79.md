# T-79: Draggable + minimizable draft lane parameters panel

**Issue:** #79
**Spec:** New requirement

## Context
* Панель параметров галсов для черновика зоны сейчас рисуется прямо в `src/components/map/MapCanvas.tsx` как `div.fixed` и позиционируется по `drawingMenuState.position`, которая каждый клик пересчитывается из координат курсора.
* Из-за этого панель часто перекрывает область построения зоны и мешает ставить/видеть вершины.

## Goal
* Сделать панель параметров галсов (черновик зоны) перетаскиваемой.
* Добавить сворачивание в компактную иконку, которая тоже перетаскивается.
* Сохранять состояние (позиции/свернутость) в рамках сессии (без персиста между запусками).
* По умолчанию панель/иконка не мешает инструменту построения зоны.

## Proposed design (for handoff)
* Вынести панель в отдельный компонент без Leaflet-зависимостей, чтобы ее можно было тестировать в jsdom:
  - `src/components/map/ZoneDraftLanePanel.tsx` (или похожее имя)
  - Props: `open`, `minimized`, `panelPos`, `iconPos`, `onChange...`, `onMinimize`, `onRestore`, `children/fields`.
* Драг реализовать через pointer events:
  - `pointerdown` на хедере панели / на иконке
  - слушатели `pointermove`/`pointerup` на `window`
  - clamp позиции в пределах viewport (учитывая размеры элемента)
  - optional: snap к краям (8-16px)
* Состояние хранить в `MapCanvas` в `useState` и не сбрасывать при каждом клике по карте.
* Инициализация:
  - если нет сохраненной позиции, ставить панель/иконку в безопасную зону (например, справа сверху под тулбаром), а не в точку клика.

## Plan
* [x] Spec: добавить/уточнить требование про draggable/minimize панель параметров галсов в `spec/spec.md` (дополнение к R-029 UI).
* [x] Refactor: выделить UI панели параметров галсов из `src/components/map/MapCanvas.tsx` в отдельный компонент.
* [x] Implement: добавить drag для развернутой панели (handle = header).
* [x] Implement: добавить minimize/restore в draggable icon.
* [x] Session state: хранить позиции и minimized state в рамках сессии (React state в `MapCanvas`).
* [x] UX safety: clamp/snap к краям, не давать утащить за пределы viewport.
* [x] Tests: добавить UI/unit тесты на drag и minimize/restore (на вынесенный компонент).
* [x] Verify: `npm run typecheck`, `npm run lint`, `npm run test`.

## Acceptance
* [x] Пользователь может перетаскивать панель параметров галсов.
* [x] Панель сворачивается в иконку; иконка draggable; по клику восстанавливает панель.
* [x] Состояние позиции/свернутости сохраняется в рамках сессии.
* [x] Панель не появляется «под курсором» и не блокирует построение зоны.
* [x] Есть базовые тесты на drag/minimize.
